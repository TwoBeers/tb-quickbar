var HEIGHT_OF_OBJ=32;var WIDTH_OF_OBJ=120;var is_div_init=false;function hexToRgb(c,f){if(f==undefined){f=null}if(c.substr(0,1)=="#"){c=c.substr(1)}var e;var d;var a;if(c.length==3){e=c.substr(0,1);e+=e;d=c.substr(1,1);d+=d;a=c.substr(2,1);a+=a}else{if(c.length==6){e=c.substr(0,2);d=c.substr(2,2);a=c.substr(4,2)}else{return f}}e=parseInt(e,16);d=parseInt(d,16);a=parseInt(a,16);if(isNaN(e)||isNaN(d)||isNaN(a)){return f}else{return{r:e/255,g:d/255,b:a/255}}}function rgbToHex(d,c,a,e){d=Math.round(d*255);c=Math.round(c*255);a=Math.round(a*255);if(e==undefined){e=true}d=d.toString(16);if(d.length==1){d="0"+d}c=c.toString(16);if(c.length==1){c="0"+c}a=a.toString(16);if(a.length==1){a="0"+a}return((e?"#":"")+d+c+a).toUpperCase()}var arVersion=navigator.appVersion.split("MSIE");var version=parseFloat(arVersion[1]);function fixPNG(a){if((version>=5.5)&&(version<7)&&(document.body.filters)){var b=document.createElement("span");b.id=a.id;b.className=a.className;b.title=a.title;b.style.cssText=a.style.cssText;b.style.setAttribute("filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+a.src+"', sizingMethod='scale')");b.style.fontSize="0";b.style.width=a.width.toString()+"px";b.style.height=a.height.toString()+"px";b.style.display="inline-block";return b}else{return a.cloneNode(false)}}function trackDrag(d,c){function b(e,g){var f=pageCoords(d);e=(e-f.x)+document.documentElement.scrollLeft;g=(g-f.y)+document.documentElement.scrollTop;if(e<0){e=0}if(g<0){g=0}if(e>d.offsetWidth-1){e=d.offsetWidth-1}if(g>d.offsetHeight-1){g=d.offsetHeight-1}return{x:e,y:g}}function a(g){var j=b(g.clientX,g.clientY);var i=j.x;var f=j.y;c(j.x,j.y);function h(k){var l=b(k.clientX,k.clientY);if(l.x!=i||l.y!=f){i=l.x;f=l.y;c(l.x,l.y)}}function e(k){myRemoveEventListener(document,"mouseup",e);myRemoveEventListener(document,"mousemove",h);myAddEventListener(d,"mousedown",a)}myAddEventListener(document,"mouseup",e);myAddEventListener(document,"mousemove",h);myRemoveEventListener(d,"mousedown",a);if(g.preventDefault){g.preventDefault()}}myAddEventListener(d,"mousedown",a);d.onmousedown=function(f){return false};d.onselectstart=function(f){return false};d.ondragstart=function(f){return false}}var eventListeners=[];function findEventListener(d,c,b){var a;for(a in eventListeners){if(eventListeners[a].node==d&&eventListeners[a].event==c&&eventListeners[a].handler==b){return a}}return null}function myAddEventListener(c,b,a){if(findEventListener(c,b,a)!=null){return}if(!c.addEventListener){c.attachEvent("on"+b,a)}else{c.addEventListener(b,a,false)}eventListeners.push({node:c,event:b,handler:a})}function removeEventListenerIndex(b){var a=eventListeners[b];delete eventListeners[b];if(!a.node.removeEventListener){a.node.detachEvent("on"+a.event,a.handler)}else{a.node.removeEventListener(a.event,a.handler,false)}}function myRemoveEventListener(c,b,a){removeEventListenerIndex(findEventListener(c,b,a))}function cleanupEventListeners(){var a;for(a=eventListeners.length;a>0;a--){if(eventListeners[a]!=undefined){removeEventListenerIndex(a)}}}myAddEventListener(window,"unload",cleanupEventListeners);function hsvToRgb(h,g,k){var c;var d;var l;if(k==0){c=0;d=0;l=0}else{var e=Math.floor(h*6);var j=(h*6)-e;var b=k*(1-g);var a=k*(1-(g*j));var m=k*(1-(g*(1-j)));switch(e){case 1:c=a;d=k;l=b;break;case 2:c=b;d=k;l=m;break;case 3:c=b;d=a;l=k;break;case 4:c=m;d=b;l=k;break;case 5:c=k;d=b;l=a;break;case 6:case 0:c=k;d=m;l=b;break}}return{r:c,g:d,b:l}}function rgbToHsv(a,b,h){var f=Math.max(Math.max(a,b),h);var c=Math.min(Math.min(a,b),h);var e;var d;var g=f;if(c==f){e=0;d=0}else{var i=(f-c);d=i/f;if(a==f){e=(b-h)/i}else{if(b==f){e=2+((h-a)/i)}else{e=4+((a-b)/i)}}e/=6;if(e<0){e+=1}if(e>1){e-=1}}return{h:e,s:d,v:g}}function pageCoords(c){var a=c.offsetLeft;var d=c.offsetTop;var b=c.offsetParent;while(b!=null){a+=b.offsetLeft;d+=b.offsetTop;b=b.offsetParent}return{x:a,y:d}}var huePositionImg=document.createElement("img");huePositionImg.galleryImg=false;huePositionImg.width=35;huePositionImg.height=11;huePositionImg.style.position="absolute";var hueSelectorImg=document.createElement("img");hueSelectorImg.galleryImg=false;hueSelectorImg.width=35;hueSelectorImg.height=200;hueSelectorImg.style.display="block";var satValImg=document.createElement("img");satValImg.galleryImg=false;satValImg.width=200;satValImg.height=200;satValImg.style.display="block";var crossHairsImg=document.createElement("img");crossHairsImg.galleryImg=false;crossHairsImg.width=21;crossHairsImg.height=21;crossHairsImg.style.position="absolute";function makeColorSelector(f){var n,h;function k(){is_div_init=false;var r=rgbToHex(n.r,n.g,n.b);var s=hsvToRgb(h.h,1,1);var q=rgbToHex(s.r,s.g,s.b);f.style.background=r;f.value=r;if(f.id=="fontcolor"){document.getElementById("qbp_text").style.color=r}if(f.id=="hifontcolor"){document.getElementById("qbp_hitext").style.color=r}if(f.id=="bgcolor"){document.getElementById("quickbarpreview").style.backgroundColor=r}if(f.id=="bordercolor"){document.getElementById("quickbarpreview").style.borderColor=r;document.getElementById("qbp_text").style.borderColor=r}if(((n.r*100+n.g*100+n.b*100)/3)<65){f.style.color="#fff"}else{f.style.color="#000"}d.style.background=q;g.style.left=((h.v*199)-10).toString()+"px";g.style.top=(((1-h.s)*199)-10).toString()+"px";b.style.top=((h.h*199)-5).toString()+"px";is_div_init=true}function p(){h=rgbToHsv(n.r,n.g,n.b);k()}function e(){n=hsvToRgb(h.h,h.s,h.v);k()}var o=document.createElement("div");o.id="tcp-maindiv";var a=document.createElement("div");a.id="tcp-btnclose";a.innerHTML='<small>&lt;- Choose Color</small><input type="button" class="button-secondary" title="Close Color Picker" value="x" style="padding: 0 5px; float:right; margin-top: -2px;" onclick="hideColorPicker()"></input>';o.appendChild(a);var d=document.createElement("div");d.id="tcp-satval";var j=fixPNG(satValImg);d.appendChild(j);var g=crossHairsImg.cloneNode(false);d.appendChild(g);function m(q,r){h.s=1-(r/199);h.v=(q/199);e()}trackDrag(d,m);o.appendChild(d);var i=document.createElement("div");i.id="tcp-hue";var b=fixPNG(huePositionImg);i.appendChild(hueSelectorImg.cloneNode(false));i.appendChild(b);function l(q,r){is_div_init=false;h.h=r/199;e()}trackDrag(i,l);o.appendChild(i);function c(){n=hexToRgb(f.value,{r:0,g:0,b:0});p()}myAddEventListener(f,"change",c);c();return o}function colorPickerGetTopPos(a){var b=a.offsetTop;while((a=a.offsetParent)!=null){b+=a.offsetTop}return b-HEIGHT_OF_OBJ}function colorPickerGetLeftPos(a){var b=a.offsetLeft;while((a=a.offsetParent)!=null){b+=a.offsetLeft}return b+WIDTH_OF_OBJ}function startColorPicker(b){hideColorPicker();var a=document.createElement("DIV");a.style.left=colorPickerGetLeftPos(b)+"px";a.style.top=colorPickerGetTopPos(b)+b.offsetHeight+2+"px";a.id="The_colorPicker";a.style.display="block";a.appendChild(makeColorSelector(b));document.body.appendChild(a);is_div_init=true}function hideColorPicker(){if(is_div_init){is_div_init=false;document.body.removeChild(document.getElementById("The_colorPicker"))}}function maskedHex(b){var a="#[0-9a-fA-F]{7}";b.value=b.value.replace(a,"")};